# GitHub Copilot Workflow Known Issues

## Issue: Git Diff Error During Dependabot Check

**Affected Workflow Run:** [21818991323](https://github.com/ocerrahyan/monodash/actions/runs/21818991323/job/62947194310)

**Status:** Cancelled (but work completed successfully)

**Branch:** `copilot/research-honda-civic-drivetrain-components`

### Symptom

The GitHub Copilot workflow gets cancelled during the Dependabot Checker phase with the following error:

```
fatal: ambiguous argument 'main': unknown revision or path not in the working tree.
Use '--' to separate paths from revisions, like this:
'git <command> [<revision>...] -- [<file>...]'
```

### Root Cause

The GitHub Copilot workflow's Dependabot Checker step attempts to run `git diff main` to check for dependency changes, but the `main` branch isn't available in the working tree during feature branch checkouts.

When GitHub Actions checks out a feature branch, it doesn't automatically fetch or create local tracking branches for other branches like `main`. The workflow infrastructure assumes `main` will be available for comparison.

### Impact

**Low** - This is a cosmetic issue that doesn't prevent actual work from completing:
- The primary task (research, documentation, code generation) completes successfully
- All commits are made and pushed
- Pull requests can still be created and merged
- The workflow is marked as "cancelled" instead of "successful"

### Example

In workflow run 21818991323:
- ✅ Successfully created 2,697 lines of Honda Civic drivetrain documentation and code
- ✅ All files committed to branch `copilot/research-honda-civic-drivetrain-components`
- ✅ Pull request #1 was created and merged to main
- ❌ Workflow marked as "cancelled" due to Dependabot check error

### Workaround

This is a GitHub Copilot workflow infrastructure issue that cannot be fixed at the repository level. The workflow would need to be updated by GitHub to:

1. **Option 1:** Fetch the base branch before attempting diff
   ```bash
   git fetch origin main:main
   ```

2. **Option 2:** Use `FETCH_HEAD` or a commit SHA instead of branch name
   ```bash
   git diff FETCH_HEAD
   ```

3. **Option 3:** Handle missing base branch gracefully
   ```bash
   if git rev-parse --verify main >/dev/null 2>&1; then
     git diff main
   else
     echo "Base branch not available, skipping diff"
   fi
   ```

### Recommendation

**No action needed** in the repository. The issue is in the GitHub Copilot workflow infrastructure. Monitor future workflow runs to see if GitHub resolves this issue in their workflow system.

If the "cancelled" status is problematic for your workflow tracking, you may want to report this to GitHub Copilot support.

### Related Files

The successfully completed work from the "cancelled" workflow:
- `docs/2000-honda-civic-si-drivetrain-specs.md` (657 lines)
- `docs/README.md` (234 lines)
- `docs/component-diagrams.md` (390 lines)
- `shared/drivetrainTypes.ts` (604 lines)
- `shared/oemComponentData.ts` (812 lines)

All successfully merged to `main` via PR #1.
